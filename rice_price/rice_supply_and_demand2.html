<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—¥æœ¬ã®ç±³å¸‚å ´ãƒˆãƒ¬ãƒ³ãƒ‰ ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f0f4f8; /* Light grayish blue background */
            font-size: 18px; /* Base font size increased for YouTube layout */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px; /* Increased max-width */
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Increased height */
            max-height: 450px; /* Increased max-height */
        }
        .large-chart-container { /* For combined chart */
            position: relative;
            width: 100%;
            max-width: 900px; /* Increased max-width */
            margin-left: auto;
            margin-right: auto;
            height: 500px; /* Increased height */
            max-height: 600px; /* Increased max-height */
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px; /* Further increase for md screens */
            }
            .large-chart-container {
                height: 550px; /* Further increase for md screens */
            }
        }
        .section-title {
            color: #FF8C00; /* Energetic & Playful - Orange */
        }
        .stat-value {
            color: #008080; /* Energetic & Playful - Teal */
            font-weight: bold;
        }
        .card {
            background-color: white;
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
            padding: 2rem; /* Increased padding p-8 equivalent */
            margin-bottom: 2rem; /* Increased margin mb-8 equivalent */
        }
        .primary-bg { background-color: #FF8C00; } /* Orange */
        .secondary-bg { background-color: #FFD700; } /* Yellow */
        .accent-bg-1 { background-color: #008080; } /* Teal */
        .accent-bg-2 { background-color: #FF69B4; } /* Pink */
        .accent-bg-3 { background-color: #ADD8E6; } /* Light Blue */

        .primary-text { color: #FF8C00; }
        .secondary-text { color: #FFD700; }
        .accent-text-1 { color: #008080; }
        .accent-text-2 { color: #FF69B4; }
        .accent-text-3 { color: #ADD8E6; }

        .sd-diagram {
            width: 100%;
            max-width: 500px; /* Increased max-width */
            height: 375px; /* Increased height proportionally */
            border-left: 3px solid #333; /* Thicker border */
            border-bottom: 3px solid #333; /* Thicker border */
            position: relative;
            margin: 3rem auto; /* Increased margin */
        }
        .sd-diagram::before {
            content: 'ä¾¡æ ¼(P)';
            position: absolute;
            top: -30px; /* Adjusted position */
            left: -45px; /* Adjusted position */
            font-size: 1rem; /* Increased font size */
        }
        .sd-diagram::after {
            content: 'æ•°é‡(Q)';
            position: absolute;
            bottom: -30px; /* Adjusted position */
            right: -45px; /* Adjusted position */
            font-size: 1rem; /* Increased font size */
        }
        .demand-curve, .supply-curve {
            position: absolute;
            background-color: #FF8C00; 
            height: 3px; /* Thicker lines */
            transform-origin: left;
        }
        .supply-curve {
            background-color: #008080; 
        }
        .demand-curve {
            width: 80%;
            top: 20%;
            left: 5%;
            transform: rotate(-15deg);
        }
        .supply-curve {
            width: 80%;
            bottom: 25%;
            left: 5%;
            transform: rotate(15deg);
        }
        .equilibrium-point {
            position: absolute;
            width: 12px; /* Larger point */
            height: 12px; /* Larger point */
            background-color: #FF69B4; 
            border-radius: 50%;
            top: 43%; 
            left: 48%; 
        }
        .equilibrium-point::after {
            content: 'å‡è¡¡ç‚¹ E';
            position: absolute;
            top: -25px; /* Adjusted position */
            left: 20px; /* Adjusted position */
            font-size: 0.9rem; /* Increased font size */
            color: #FF69B4;
        }
        .icon-style {
            font-size: 3rem; /* Increased icon size */
            margin-bottom: 0.75rem; /* Adjusted margin */
            color: #FF8C00; 
        }

    </style>
</head>
<body class="bg-gray-100 text-gray-800 p-6 md:p-12">
    <!-- 
        Chosen Color Palette: Energetic & Playful
        Orange: #FF8C00
        Yellow: #FFD700
        Teal: #008080
        Pink: #FF69B4
        Light Blue: #ADD8E6
    -->
    <!-- 
        Narrative Plan Summary (Revised):
        1. Header: Title & Lead
        2. Section 1: Basic Rice Price Structure (Cost Donut Chart)
        3. Section 2: Demand Trends (Per Capita Consumption Line Chart, Total Demand Big Numbers & Text linking to price pressure)
        4. Section 3: Supply Trends & Adjustments (Harvest Volume Bar Chart, Weather Impact Text & Text linking to price pressure)
        5. Section 4: Rice Price and Supply/Demand Correlation (Combined Line Chart for Price, Demand Volume, Supply Volume - Reiwa Era)
        6. Section 5: Core Price Determination Mechanism (HTML/CSS S&D Diagram - Emphasized)
        7. Section 6: Other Influencing Factors (Cards/List for Policy, Weather, International Markets)
        8. Conclusion: Summary
        9. Footer: Sources
    -->
    <!-- 
        Visualization Choices Summary (Revised - Confirming NO SVG, NO MERMAID JS):
        - Cost Structure: Donut Chart (Chart.js Canvas) - Goal: Inform/Compare.
        - Per Capita Consumption: Line Chart (Chart.js Canvas) - Goal: Change.
        - Total Demand: Big Numbers (HTML Text) - Goal: Inform.
        - Harvest Volume: Bar Chart (Chart.js Canvas) - Goal: Compare/Change.
        - Weather Impact: Text + Unicode Icon (HTML) - Goal: Inform.
        - Price, Demand & Supply Correlation: Combined Line Chart (Chart.js Canvas) - Goal: Relationships/Change. Justification: Shows interrelation of key variables over time. (Replaces inventory charts and standalone price chart).
        - S&D Diagram: Structured HTML/CSS with Tailwind - Goal: Organize/Relationships.
        - Other Factors: HTML/CSS Cards/List + Unicode Icons - Goal: Organize.
        - NEITHER Mermaid JS NOR SVG were used anywhere in this output.
    -->

    <header class="text-center mb-16">
        <h1 class="text-5xl md:text-6xl font-bold primary-text mb-6">æ—¥æœ¬ã®ç±³ä¾¡æ ¼</h1>
        <h2 class="text-3xl md:text-4xl font-bold accent-text-1 mb-8">éœ€çµ¦ãƒãƒ©ãƒ³ã‚¹ã¨å¸‚å ´å‹•å‘ã®å¾¹åº•è§£èª¬</h2>
        <p class="text-xl md:text-2xl text-gray-700 max-w-5xl mx-auto">
            æ—¥æœ¬ã®ä¸»é£Ÿã§ã‚ã‚‹ç±³ã€‚ãã®ä¾¡æ ¼ãŒã©ã®ã‚ˆã†ã«æ±ºã¾ã‚‹ã®ã‹ã€æœ€æ–°ã®ãƒ‡ãƒ¼ã‚¿ã¨ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’åŸºã«ã€éœ€è¦ã¨ä¾›çµ¦ã®è¦–ç‚¹ã‹ã‚‰è©³ç´°ã«åˆ†æã—ã¾ã™ã€‚
        </p>
    </header>

    <main class="space-y-16">
        <section class="card">
            <h3 class="text-3xl font-bold section-title mb-8 text-center">1. ç±³ä¾¡æ ¼ã®åŸºæœ¬æ§‹é€ </h3>
            <p class="text-xl text-gray-700 mb-8 text-center">
                ç±³ã®å°å£²ä¾¡æ ¼ã¯ã€ç”Ÿç”£ã‚³ã‚¹ãƒˆã€æµé€šã‚³ã‚¹ãƒˆã€ãã—ã¦å„æ®µéšã§ã®ãƒãƒ¼ã‚¸ãƒ³ã‹ã‚‰æˆã‚Šç«‹ã£ã¦ã„ã¾ã™ã€‚ç‰¹ã«ç”Ÿç”£ã‚³ã‚¹ãƒˆãŒå¤§ããªå‰²åˆã‚’å ã‚ã¦ã„ã¾ã™ã€‚
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
                <div>
                    <h4 class="text-2xl font-semibold accent-text-1 mb-3">ã‚³ã‚¹ãƒˆæ§‹é€ ã®å†…è¨³</h4>
                    <p class="text-lg text-gray-600 mb-5">
                        æœ€çµ‚å°å£²ä¾¡æ ¼ã®ã†ã¡ã€ç´„6å‰²ãŒç”Ÿç”£ã‚³ã‚¹ãƒˆï¼ˆç¨®å­ã€è‚¥æ–™ã€è¾²è–¬ã€æ©Ÿæ¢°ã€äººä»¶è²»ãªã©ï¼‰ã§å ã‚ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚æ®‹ã‚ŠãŒæµé€šã‚³ã‚¹ãƒˆã‚„ãƒãƒ¼ã‚¸ãƒ³ã¨ãªã‚Šã¾ã™ã€‚
                        ç”Ÿç”£è€…ãŒèµ¤å­—ã¨ãªã‚‹ã‚±ãƒ¼ã‚¹ã‚‚ã‚ã‚Šã€ã‚³ã‚¹ãƒˆã®ä¾¡æ ¼è»¢å«ãŒå¸¸ã«å®¹æ˜“ã§ã¯ãªã„çŠ¶æ³ã‚‚ç¤ºå”†ã•ã‚Œã¦ã„ã¾ã™ã€‚
                    </p>
                </div>
                <div class="chart-container h-72 md:h-96">
                    <canvas id="costStructureChart"></canvas>
                </div>
            </div>
        </section>

        <section class="card">
            <h3 class="text-3xl font-bold section-title mb-8 text-center">2. éœ€è¦ã®å‹•å‘ (ä»¤å’Œæ™‚ä»£)</h3>
            <p class="text-xl text-gray-700 mb-8 text-center">
                å›½å†…ã®ç±³ã®éœ€è¦ã¯ã€äººå£æ¸›å°‘ã‚„é£Ÿç”Ÿæ´»ã®å¤šæ§˜åŒ–ã«ã‚ˆã‚Šã€ä»¤å’Œã«å…¥ã£ã¦ã‚‚é•·æœŸçš„ã«æ¸›å°‘å‚¾å‘ãŒç¶šã„ã¦ã„ã¾ã™ã€‚ã“ã®éœ€è¦ã®å¤‰å‹•ã¯ã€ä¾¡æ ¼å½¢æˆã«ãŠã‘ã‚‹é‡è¦ãªè¦ç´ ã®ä¸€ã¤ã§ã™ã€‚
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
                <div class="chart-container">
                    <canvas id="consumptionTrendChartReiwa"></canvas>
                </div>
                <div>
                    <h4 class="text-2xl font-semibold accent-text-1 mb-3">ä¸€äººå½“ãŸã‚Šå¹´é–“ç±³æ¶ˆè²»é‡ã®æ¨ç§» (ä»¤å’Œ)</h4>
                    <p class="text-lg text-gray-600 mb-5">
                        ä»¤å’Œå…ƒå¹´åº¦(2019å¹´åº¦)ã®54.6kgã‹ã‚‰ã€ä»¤å’Œ4å¹´åº¦(2022å¹´åº¦)ã«ã¯50.9kgã¸ã¨æ¸›å°‘ã—ã¦ã„ã¾ã™ã€‚1962å¹´åº¦ã®ãƒ”ãƒ¼ã‚¯æ™‚(118.3kg)ã¨æ¯”è¼ƒã™ã‚‹ã¨å¤§å¹…ãªæ¸›å°‘ã§ã™ã€‚
                    </p>
                    <h4 class="text-2xl font-semibold accent-text-1 mb-3 mt-8">ä¸»é£Ÿç”¨ç±³ã®ç·éœ€è¦é‡ (å®Ÿç¸¾)</h4>
                    <div class="space-y-3">
                        <p class="text-xl"><span class="font-bold">ä»¤å’Œå…ƒå¹´(2019å¹´):</span> <span class="stat-value text-3xl">714</span> ä¸‡ãƒˆãƒ³</p>
                        <p class="text-xl"><span class="font-bold">ä»¤å’Œ4å¹´(2022å¹´):</span> <span class="stat-value text-3xl">670</span> ä¸‡ãƒˆãƒ³</p>
                    </div>
                    <p class="text-lg text-gray-600 mt-5">
                        ç·éœ€è¦é‡ã®æ¸›å°‘ã¯ã€ä»–ã®æ¡ä»¶ãŒä¸€å®šã§ã‚ã‚Œã°ä¾¡æ ¼ã«å¯¾ã™ã‚‹ä¸‹æ–¹åœ§åŠ›ã¨ãªã‚Šã¾ã™ãŒã€ä¾›çµ¦é‡ã¨ã®ãƒãƒ©ãƒ³ã‚¹ã§å®Ÿéš›ã®ä¾¡æ ¼ã¯å¤‰å‹•ã—ã¾ã™ã€‚
                    </p>
                </div>
            </div>
        </section>

        <section class="card">
            <h3 class="text-3xl font-bold section-title mb-8 text-center">3. ä¾›çµ¦ã®å‹•å‘ã¨èª¿æ•´ (ä»¤å’Œæ™‚ä»£)</h3>
            <p class="text-xl text-gray-700 mb-8 text-center">
                éœ€è¦ã®æ¸›å°‘ã«å¯¾å¿œã—ã€ä¸»é£Ÿç”¨ç±³ã®ä½œä»˜é¢ç©ã‚„ç”Ÿç”£é‡ã¯æ”¿ç­–çš„ã«èª¿æ•´ã•ã‚Œã¦ãã¾ã—ãŸã€‚å¤©å€™ã«ã‚ˆã‚‹ä¾›çµ¦å¤‰å‹•ãƒªã‚¹ã‚¯ã‚‚ä¾¡æ ¼ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ä¸»è¦å› ã§ã™ã€‚
            </p>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-center">
                 <div>
                    <h4 class="text-2xl font-semibold accent-text-1 mb-3">ä¸»é£Ÿç”¨ç±³åç©«é‡ã®å¤‰åŒ– (ä»¤å’Œ)</h4>
                    <p class="text-lg text-gray-600 mb-5">
                        ä»¤å’Œå…ƒå¹´ã‹ã‚‰ä»¤å’Œ5å¹´ã«ã‹ã‘ã¦ã€ä¸»é£Ÿç”¨ç±³ã®åç©«é‡ã‚‚å¹´ã«ã‚ˆã£ã¦å¤‰å‹•ãŒè¦‹ã‚‰ã‚Œã¾ã™ã€‚è±Šä½œã‚„ä¸ä½œã¯ã€å¸‚å ´ä¾¡æ ¼ã«ç›´æ¥çš„ãªå½±éŸ¿ã‚’åŠã¼ã—ã¾ã™ã€‚
                    </p>
                     <h4 class="text-2xl font-semibold accent-text-1 mb-3 mt-8">å¤©å€™ã®å½±éŸ¿</h4>
                    <div class="flex items-start space-x-3 text-lg text-gray-600">
                        <span class="icon-style mt-1">ğŸŒ¦ï¸</span>
                        <p>ä¾›çµ¦é‡ã¯å¤©å€™ï¼ˆçŒ›æš‘ã€å†·å®³ã€æ°´å®³ãªã©ï¼‰ã«ã‚ˆã£ã¦å¹´ã”ã¨ã«å¤§ããå¤‰å‹•ã™ã‚‹ãƒªã‚¹ã‚¯ã‚’å¸¸ã«æŠ±ãˆã¦ã„ã¾ã™ã€‚ä¾‹ãˆã°ã€2023å¹´ã®è¨˜éŒ²çš„ãªçŒ›æš‘ã¯ä½œæŸ„ã«å½±éŸ¿ã‚’ä¸ãˆã€ä¸€éƒ¨åœ°åŸŸã§å“è³ªä½ä¸‹ã‚„åé‡æ¸›ã‚’å¼•ãèµ·ã“ã—ã€ä¾¡æ ¼ä¸Šæ˜‡ã®ä¸€å› ã¨ãªã‚Šã¾ã—ãŸã€‚</p>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="harvestVolumeChartReiwa"></canvas>
                </div>
            </div>
        </section>

        <section class="card">
            <h3 class="text-3xl font-bold section-title mb-8 text-center">4. ç±³ä¾¡ã¨éœ€çµ¦é‡ã®ç›¸é–¢åˆ†æ (ä»¤å’Œæ™‚ä»£)</h3>
            <p class="text-xl text-gray-700 mb-8 text-center">
                ç±³ã®ä¾¡æ ¼ã¯ã€éœ€è¦é‡ã¨ä¾›çµ¦é‡ã®ãƒãƒ©ãƒ³ã‚¹ã«æ•æ„Ÿã«åå¿œã—ã¾ã™ã€‚ä»¥ä¸‹ã®ã‚°ãƒ©ãƒ•ã¯ã€ä»¤å’Œæ™‚ä»£ã«ãŠã‘ã‚‹ä¾¡æ ¼ã€ç·éœ€è¦é‡ã€ãã—ã¦ä¾›çµ¦é‡ï¼ˆåç©«é‡ï¼‰ã®æ¨ç§»ã‚’ç¤ºã—ã¦ãŠã‚Šã€ã“ã‚Œã‚‰ã®ç›¸é–¢é–¢ä¿‚ã‚’è¦–è¦šçš„ã«æ‰ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
            </p>
            <div class="large-chart-container">
                <canvas id="priceDemandSupplyChartReiwa"></canvas>
            </div>
            <p class="text-lg text-gray-600 mt-8 text-center">
                ä¸€èˆ¬çš„ã«ã€ä¾›çµ¦é‡ãŒéœ€è¦é‡ã‚’ä¸Šå›ã‚‹ï¼ˆã¾ãŸã¯ãã®ã‚ˆã†ã«äºˆæ¸¬ã•ã‚Œã‚‹ï¼‰ã¨ä¾¡æ ¼ã¯ä¸‹è½åœ§åŠ›ã‚’å—ã‘ã€é€†ã«ä¾›çµ¦é‡ãŒéœ€è¦é‡ã«å¯¾ã—ã¦ä¸è¶³ã™ã‚‹ï¼ˆã¾ãŸã¯ãã®æ‡¸å¿µãŒã‚ã‚‹ï¼‰ã¨ä¾¡æ ¼ã¯ä¸Šæ˜‡åœ§åŠ›ã‚’å—ã‘ã¾ã™ã€‚
                ä»¤å’Œ3å¹´ç”£ã®ã‚ˆã†ã«ä¾›çµ¦é‡ãŒéœ€è¦é‡ã«è¿‘æ¥ã€ã‚ã‚‹ã„ã¯ä¸‹å›ã£ãŸå ´åˆã«ä¾¡æ ¼ãŒç›¸å¯¾çš„ã«ä½ããªã£ãŸã®ã¯ã€å‰å¹´ã‹ã‚‰ã®æŒã¡è¶Šã—åœ¨åº«ãªã©ä»–ã®è¦å› ã‚‚å½±éŸ¿ã—ã¦ã„ã‚‹è¤‡é›‘ãªå¸‚å ´çŠ¶æ³ã‚’ç¤ºå”†ã—ã¦ã„ã¾ã™ã€‚ä¸€æ–¹ã§ã€ä»¤å’Œ5å¹´ç”£ã®ã‚ˆã†ã«ä¾›çµ¦ãŒçµã‚‰ã‚Œéœ€è¦ã¨ã®ãƒãƒ©ãƒ³ã‚¹ãŒå¤‰åŒ–ã™ã‚‹ã¨ä¾¡æ ¼ãŒä¸Šæ˜‡ã™ã‚‹å‚¾å‘ã‚‚è¦‹ã‚‰ã‚Œã¾ã™ã€‚
            </p>
        </section>

        <section class="card">
            <h3 class="text-3xl font-bold section-title mb-8 text-center">5. ä¾¡æ ¼æ±ºå®šã®æ ¸å¿ƒãƒ¡ã‚«ãƒ‹ã‚ºãƒ </h3>
            <p class="text-xl text-gray-700 mb-8 text-center">
                çµŒæ¸ˆå­¦ã®åŸºæœ¬åŸå‰‡ã«åŸºã¥ãã€ç±³ã®ä¾¡æ ¼ã‚‚éœ€è¦æ›²ç·šã¨ä¾›çµ¦æ›²ç·šãŒäº¤å·®ã™ã‚‹å‡è¡¡ç‚¹ã§æ±ºå®šã•ã‚Œã¾ã™ã€‚ã“ã®å‡è¡¡ç‚¹ã¯ã€å¸‚å ´å‚åŠ è€…ã®è¡Œå‹•ã‚„å¤–éƒ¨ç’°å¢ƒã®å¤‰åŒ–ã«å¿œã˜ã¦å¸¸ã«å¤‰å‹•ã—ã¾ã™ã€‚
            </p>
            <div class="sd-diagram">
                <div class="demand-curve"><span class="absolute -top-6 right-0 text-base text-gray-700">éœ€è¦æ›²ç·š (D)</span></div>
                <div class="supply-curve"><span class="absolute -bottom-6 right-0 text-base text-gray-700">ä¾›çµ¦æ›²ç·š (S)</span></div>
                <div class="equilibrium-point"></div>
            </div>
            <p class="text-lg text-gray-600 mt-10 text-center">
                ã“ã®å›³ã¯ã€éœ€è¦é‡ã¨ä¾›çµ¦é‡ãŒä¸€è‡´ã™ã‚‹ç‚¹ã§ä¾¡æ ¼ãŒæ±ºã¾ã‚‹æ¦‚å¿µã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚å®Ÿéš›ã®å¸‚å ´ã§ã¯ã€å¤©å€™ã«ã‚ˆã‚‹ä¾›çµ¦å¤‰å‹•ã€æ¶ˆè²»è€…ã®å—œå¥½å¤‰åŒ–ã«ã‚ˆã‚‹éœ€è¦å¤‰å‹•ã€æ”¿åºœã®æ”¿ç­–ãªã©ãŒã“ã‚Œã‚‰ã®æ›²ç·šã«å½±éŸ¿ã‚’ä¸ãˆã€å‡è¡¡ä¾¡æ ¼ã‚’å‹•ã‹ã—ã¾ã™ã€‚
            </p>
        </section>

        <section class="card">
            <h3 class="text-3xl font-bold section-title mb-8 text-center">6. ä¾¡æ ¼ã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ãã®ä»–ã®è¦å› </h3>
            <p class="text-xl text-gray-700 mb-8 text-center">
                éœ€çµ¦ãƒãƒ©ãƒ³ã‚¹ä»¥å¤–ã«ã‚‚ã€ç±³ä¾¡ã«å½±éŸ¿ã‚’åŠã¼ã™æ§˜ã€…ãªè¦å› ãŒå­˜åœ¨ã—ã¾ã™ã€‚
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="p-6 rounded-lg shadow-lg bg-white border border-gray-200 text-center">
                    <div class="icon-style">ğŸ›ï¸</div>
                    <h4 class="text-xl font-semibold accent-text-1 mb-2">æ”¿åºœã®æ”¿ç­–</h4>
                    <p class="text-base text-gray-600">ç”Ÿç”£èª¿æ•´ï¼ˆè»¢ä½œæ”¯æ´ãªã©ï¼‰ã‚„å‚™è“„ç±³ã®å¸‚å ´æ“ä½œï¼ˆæ”¾å‡ºãƒ»è²·å…¥ï¼‰ã¯ã€å¸‚å ´ã®ä¾›çµ¦é‡ã‚’ç›´æ¥çš„ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã€ä¾¡æ ¼ã®å®‰å®šã¾ãŸã¯å¤‰å‹•ã«å½±éŸ¿ã‚’ä¸ãˆã¾ã™ã€‚</p>
                </div>
                <div class="p-6 rounded-lg shadow-lg bg-white border border-gray-200 text-center">
                    <div class="icon-style">ğŸŒ</div>
                    <h4 class="text-xl font-semibold accent-text-1 mb-2">å›½éš›å¸‚æ³ã¨ç‚ºæ›¿</h4>
                    <p class="text-base text-gray-600">å°éº¦ãªã©ã®å›½éš›çš„ãªç©€ç‰©ä¾¡æ ¼ã®å¤‰å‹•ã‚„ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆã®å¤‰å‹•ã¯ã€è¼¸å…¥é£¼æ–™ã‚„è‚¥æ–™ä¾¡æ ¼ã‚’é€šã˜ã¦ç”Ÿç”£ã‚³ã‚¹ãƒˆã«å½±éŸ¿ã—ã€é–“æ¥çš„ã«å›½å†…ã®ç±³ä¾¡ã«ã‚‚å½±éŸ¿ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p>
                </div>
                <div class="p-6 rounded-lg shadow-lg bg-white border border-gray-200 text-center">
                    <div class="icon-style">ğŸŒ¾</div>
                    <h4 class="text-xl font-semibold accent-text-1 mb-2">ç”Ÿç”£ã‚³ã‚¹ãƒˆã®å¤‰å‹•</h4>
                    <p class="text-base text-gray-600">è‚¥æ–™ä¾¡æ ¼ã€ç‡ƒæ–™è²»ã€è¾²æ¥­æ©Ÿæ¢°ã®ã‚³ã‚¹ãƒˆã€äººä»¶è²»ãªã©ã®ç”Ÿç”£ã‚³ã‚¹ãƒˆã®å¤‰å‹•ã¯ã€ç”Ÿç”£è€…ã®çµŒå–¶çŠ¶æ³ã‚„ä¾›çµ¦æ„æ¬²ã«å½±éŸ¿ã—ã€çµæœã¨ã—ã¦ä¾›çµ¦ä¾¡æ ¼ã«åæ˜ ã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚</p>
                </div>
            </div>
        </section>

        <section class="text-center py-10">
            <h3 class="text-4xl font-bold primary-text mb-6">çµè«–</h3>
            <p class="text-xl md:text-2xl text-gray-700 max-w-5xl mx-auto">
                æ—¥æœ¬ã®ç±³ä¾¡æ ¼ã¯ã€ç”Ÿç”£ã‚³ã‚¹ãƒˆã‚’åŸºç¤ã¨ã—ã¤ã¤ã€é•·æœŸçš„ã«ã¯å›½å†…éœ€è¦ã®æ¸›å°‘å‚¾å‘ã¨ãã‚Œã«å¿œã˜ãŸæ”¿ç­–çš„ãªç”Ÿç”£èª¿æ•´ãŒåŸºèª¿ã¨ãªã‚Šã¾ã™ã€‚çŸ­æœŸçš„ã«ã¯ã€å¤©å€™ã«ã‚ˆã‚‹ä¾›çµ¦é‡ã®å¤‰å‹•ãŒè±Šä½œãƒ»ä¸ä½œã‚’ç”Ÿã¿å‡ºã—ã€ã“ã‚ŒãŒå¸‚å ´ã®éœ€çµ¦ãƒãƒ©ãƒ³ã‚¹ã‚’å¤§ããå·¦å³ã—ä¾¡æ ¼ã«åæ˜ ã•ã‚Œã¾ã™ã€‚
                ä»¤å’Œæ™‚ä»£ã«ãŠã„ã¦ã‚‚ã€ã“ã‚Œã‚‰ã®è¦å› ãŒè¤‡é›‘ã«çµ¡ã¿åˆã„ã€ç±³ä¾¡ã‚’å½¢æˆã—ã¦ã„ã‚‹ã“ã¨ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒã€å¸‚å ´å‹•å‘ã‚’æŠŠæ¡ã™ã‚‹ä¸Šã§æ¥µã‚ã¦é‡è¦ã§ã™ã€‚
            </p>
        </section>
    </main>

    <footer class="text-center mt-16 py-10 border-t border-gray-300">
        <p class="text-base text-gray-600 mb-3">
            è³‡æ–™å‡ºæ‰€: è¾²æ—æ°´ç”£çœã€Œé£Ÿæ–™éœ€çµ¦è¡¨ã€ã€ã€Œç±³ã®ç›¸å¯¾å–å¼•ä¾¡æ ¼ãƒ»æ•°é‡ã€ã€ã€Œç±³ç©€ã®éœ€çµ¦åŠã³ä¾¡æ ¼ã®å®‰å®šã«é–¢ã™ã‚‹åŸºæœ¬æŒ‡é‡ã€ã€ã€Œç±³ã‚’ã‚ãã‚‹çŠ¶æ³ã«ã¤ã„ã¦ã€ã€ãã®ä»–å…¬é–‹æƒ…å ±ã«åŸºã¥ãä½œæˆã€‚
            æœ¬ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ã¯æ•™è‚²ãŠã‚ˆã³æƒ…å ±æä¾›ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚
        </p>
        <p class="text-base text-gray-500">ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ä½œæˆ: Canvas Infographics (AI)</p>
    </footer>

    <script>
        Chart.defaults.font.size = 14; 

        // Ensure plugins object and nested font objects exist before setting size
        Chart.defaults.plugins = Chart.defaults.plugins || {};

        Chart.defaults.plugins.title = Chart.defaults.plugins.title || {};
        Chart.defaults.plugins.title.font = Chart.defaults.plugins.title.font || {};
        Chart.defaults.plugins.title.font.size = 18;

        Chart.defaults.plugins.legend = Chart.defaults.plugins.legend || {};
        Chart.defaults.plugins.legend.labels = Chart.defaults.plugins.legend.labels || {};
        Chart.defaults.plugins.legend.labels.font = Chart.defaults.plugins.legend.labels.font || {};
        Chart.defaults.plugins.legend.labels.font.size = 16; // Consistent with per-chart settings

        const chartJsTooltipCallbacks = {
            title: function(tooltipItems) {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                  return label.join(' ');
                } else {
                  return label;
                }
            }
        };

        function wrapLabel(str, maxWidth) {
            if (typeof str !== 'string') return [String(str)]; 
            if (str.length <= maxWidth) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = '';
            for (const word of words) {
                if ((currentLine + word).length > maxWidth && currentLine.length > 0) {
                    lines.push(currentLine.trim());
                    currentLine = '';
                }
                currentLine += word + ' ';
            }
            if (currentLine.trim().length > 0) {
                lines.push(currentLine.trim());
            }
            return lines.length > 0 ? lines : (str.length > 0 ? [str] : []);
        }
        
        const labelMaxWidth = 16; 
        const reiwaYears = ['ä»¤å’Œå…ƒå¹´ (2019)', 'ä»¤å’Œ2å¹´ (2020)', 'ä»¤å’Œ3å¹´ (2021)', 'ä»¤å’Œ4å¹´ (2022)', 'ä»¤å’Œ5å¹´ (2023)'];

        // Chart 1: Cost Structure
        const costCtx = document.getElementById('costStructureChart').getContext('2d');
        new Chart(costCtx, {
            type: 'doughnut',
            data: {
                labels: ['ç”Ÿç”£ã‚³ã‚¹ãƒˆ (ç´„60%)', 'æµé€šã‚³ã‚¹ãƒˆãƒ»ãã®ä»–ãƒãƒ¼ã‚¸ãƒ³ (ç´„40%)'].map(label => wrapLabel(label, labelMaxWidth)),
                datasets: [{
                    data: [60, 40],
                    backgroundColor: ['#FF8C00', '#008080'], 
                    borderColor: ['#FFFFFF', '#FFFFFF'],
                    borderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { 
                        position: 'bottom',
                        labels: { font: { size: 16 } } 
                    },
                    tooltip: { 
                        callbacks: chartJsTooltipCallbacks,
                        titleFont: { size: 16 }, 
                        bodyFont: { size: 14 } 
                    }
                }
            }
        });

        // Chart 2: Consumption Trend (Reiwa Era)
        const perCapitaConsumptionData = [54.6, 53.0, 51.5, 50.9, 50.0]; 
        const consumptionCtxReiwa = document.getElementById('consumptionTrendChartReiwa').getContext('2d');
        new Chart(consumptionCtxReiwa, {
            type: 'line',
            data: {
                labels: reiwaYears.map(label => wrapLabel(label, labelMaxWidth)),
                datasets: [{
                    label: 'ä¸€äººå½“ãŸã‚Šå¹´é–“ç±³æ¶ˆè²»é‡ (kg)',
                    data: perCapitaConsumptionData,
                    borderColor: '#FF69B4', 
                    backgroundColor: 'rgba(255, 105, 180, 0.1)', 
                    fill: true,
                    tension: 0.1,
                    borderWidth: 3 
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: { 
                    y: { 
                        beginAtZero: false, 
                        title: { display: true, text: 'æ¶ˆè²»é‡ (kg)', font: { size: 16 } }, 
                        ticks: { font: { size: 14 } } 
                    },
                    x: {
                        ticks: { font: { size: 14 } } 
                    }
                },
                plugins: {
                    legend: { 
                        display: true, 
                        position: 'top',
                        labels: { font: { size: 16 } } 
                    },
                    tooltip: { 
                        callbacks: chartJsTooltipCallbacks,
                        titleFont: { size: 16 }, 
                        bodyFont: { size: 14 }
                    }
                }
            }
        });

        // Chart 3: Harvest Volume (Reiwa Era)
        const harvestVolumeData = [726, 696, 670, 675, 662]; 
        const harvestCtxReiwa = document.getElementById('harvestVolumeChartReiwa').getContext('2d');
        new Chart(harvestCtxReiwa, {
            type: 'bar',
            data: {
                labels: reiwaYears.map(year => wrapLabel(year.replace(')','ç”£)'), labelMaxWidth)), 
                datasets: [{
                    label: 'ä¸»é£Ÿç”¨ç±³åç©«é‡ (ä¸‡ãƒˆãƒ³)',
                    data: harvestVolumeData,
                    backgroundColor: ['#FFD700', '#ADD8E6', '#FF8C00', '#008080', '#FF69B4'], 
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: { 
                    y: { 
                        beginAtZero: false, 
                        title: { display: true, text: 'åç©«é‡ (ä¸‡ãƒˆãƒ³)', font: {size: 16} },
                        ticks: { font: { size: 14 } } 
                    },
                    x: {
                        ticks: { font: { size: 14 } }
                    }
                },
                plugins: {
                    legend: { 
                        display: true, 
                        position: 'top',
                        labels: { font: { size: 16 } }
                    },
                    tooltip: { 
                        callbacks: chartJsTooltipCallbacks,
                        titleFont: { size: 16 }, 
                        bodyFont: { size: 14 }
                    }
                }
            }
        });
        
        // Section 4: Combined Price, Demand, Supply Chart
        const priceDataReiwa = [15716, 14529, 12804, 13844, 15247]; 
        const totalDemandDataReiwa = [714, 695, 679, 670, 660]; 
        const priceDemandSupplyCtx = document.getElementById('priceDemandSupplyChartReiwa').getContext('2d');
        new Chart(priceDemandSupplyCtx, {
            type: 'line',
            data: {
                labels: reiwaYears.map(label => wrapLabel(label, labelMaxWidth)),
                datasets: [
                    {
                        label: 'ç›¸å¯¾å–å¼•å¹³å‡ä¾¡æ ¼ (å††/60kg)',
                        data: priceDataReiwa,
                        borderColor: '#FF8C00', 
                        backgroundColor: 'rgba(255, 140, 0, 0.1)',
                        yAxisID: 'yPrice',
                        tension: 0.1,
                        borderWidth: 3 
                    },
                    {
                        label: 'ç·éœ€è¦é‡ (ä¸‡ãƒˆãƒ³)',
                        data: totalDemandDataReiwa,
                        borderColor: '#FF69B4', 
                        backgroundColor: 'rgba(255, 105, 180, 0.1)',
                        yAxisID: 'yVolume',
                        tension: 0.1,
                        borderWidth: 3
                    },
                    {
                        label: 'ä¾›çµ¦é‡(åç©«é‡) (ä¸‡ãƒˆãƒ³)',
                        data: harvestVolumeData, 
                        borderColor: '#008080', 
                        backgroundColor: 'rgba(0, 128, 128, 0.1)',
                        yAxisID: 'yVolume',
                        tension: 0.1,
                        borderWidth: 3
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                scales: {
                    x: { 
                        title: { display: true, text: 'å¹´åº¦', font: {size: 16}},
                        ticks: { font: {size: 14}}
                    },
                    yPrice: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: {
                            display: true,
                            text: 'ä¾¡æ ¼ (å††/60kg)',
                            color: '#FF8C00',
                            font: {size: 16}
                        },
                        grid: {
                            drawOnChartArea: false, 
                        },
                        ticks: { font: {size: 14}}
                    },
                    yVolume: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        title: {
                            display: true,
                            text: 'æ•°é‡ (ä¸‡ãƒˆãƒ³)',
                            color: '#008080',
                            font: {size: 16}
                        },
                         min: Math.min(...totalDemandDataReiwa, ...harvestVolumeData) - 20, 
                         max: Math.max(...totalDemandDataReiwa, ...harvestVolumeData) + 20,
                         ticks: { font: {size: 14}}
                    }
                },
                plugins: {
                    legend: { 
                        position: 'bottom',
                        labels: { font: {size: 16}}
                    },
                    tooltip: { 
                        callbacks: chartJsTooltipCallbacks,
                        mode: 'index',
                        intersect: false,
                        titleFont: {size: 16},
                        bodyFont: {size: 14}
                    }
                }
            }
        });
    </script>
</body>
</html>